<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>GoodData Javascript SDK</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <link href="https://developer.gooddata.com/favicon.ico" rel="shortcut icon">
    <!-- Le styles -->
    <link href="http://sdk.gooddata.com/gooddata-js/css/bootstrap.css" rel="stylesheet">
    <link href="http://sdk.gooddata.com/gooddata-js/css/syntax.css" rel="stylesheet">
    <link href="http://sdk.gooddata.com/gooddata-js/css/bootstrap-responsive.css" rel="stylesheet">
    <link href="http://sdk.gooddata.com/gooddata-js/css/style.css" rel="stylesheet">

<style>
body {
    padding-top: 20px;
    padding-bottom: 40px;
    background: url(http://sdk.gooddata.com/gooddata-js/images/background.png) fixed left top no-repeat;
    background-size: 111px 245px;

  }

a.topics {margin-top: 7px; font-size: 16px;}

  /* Custom container */
  .container-narrow {
    margin: 45px auto;
    max-width: 700px;
  }
  .container-narrow > hr {
    margin: 45px 0;
  }

  /* Main marketing message and sign up button */
  .jumbotron {
    padding: 60px 0;
    text-align: center;
  }
  .jumbotron h1 {
    font-size: 48px;
    line-height: 1;
  }
  .jumbotron .btn {
    font-size: 21px;
    padding: 14px 24px;
  }

  /* Supporting marketing content */
  .marketing {
    margin: 60px 0;
  }
  .marketing p + h4 {
    margin-top: 28px;
  }

  img.centered {
    margin: 30px auto;
    display: block;
/*        border: 1px solid red;*/
  }


</style>

</head>
  <body>
    <div>
        <div class="navbar navbar-inverse navbar-fixed-top">
        <div class="navbar-inner">
            <div style="margin-left: 100px;">
            <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="brand" href="http://sdk.gooddata.com/gooddata-js">
                <img src="http://sdk.gooddata.com/gooddata-js/images/header-logo.png" alt="GoodData JS SDK" width="24" height="24">
            GoodData<span style="color: #F0E040;">JS
            </a>
            <div class="nav-collapse collapse container">
                <ul class="nav">
                    
                    
                    <li>
                        <a href="http://sdk.gooddata.com/gooddata-js/">Home</a>
                    </li>
                    
                    <li>
                        <a href="http://sdk.gooddata.com/gooddata-js//getting-started">Get Started</a>
                    </li>
                    
                    <li>
                        <a href="http://sdk.gooddata.com/gooddata-js//tutorials">Build Visualization</a>
                    </li>
                    
                    <li>
                        <a href="http://sdk.gooddata.com/gooddata-js//api">API</a>
                    </li>
                    
                    <li>
                        <a href="https://developer.gooddata.com/forum" target="_blank">Forum</a>
                    </li>
                </ul>
            </div>
            </div>
        </div>
        </div>
      <div class="navbar navbar-inverse navbar-fixed-top">
  <div class="navbar-inner">
    <div style="margin-left: 100px;">
      <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="brand" href="http://sdk.gooddata.com/gooddata-js">
      <img src="http://sdk.gooddata.com/gooddata-js/images/header-logo.png" alt="GoodData Labs" width="24" height="24">
      GoodData<span style="color: #F0E040;">JS
</a>
      <div class="nav-collapse collapse container">
        <ul class="nav">
          <li class="">
            <a href="http://sdk.gooddata.com/gooddata-js/">Home</a>
          </li>
          <li class="">
            <a href="http://sdk.gooddata.com/gooddata-js/getting-started">Get Started</a>
          </li>
          <li class="">
            <a href="http://sdk.gooddata.com/gooddata-js/tutorials">Build Visualization</a>
          </li>
          <li class="">
            <a href="http://sdk.gooddata.com/gooddata-js/api">API</a>
          </li>
		<li class="">
            <a href="https://developer.gooddata.com/forum" target="_blank">Forum</a>
          </li>
        </ul>
      </div>
    </div>
  </div>
</div>

<div class="container-narrow" style="margin-top: 40px;">
  <h2>Setting Up D3.js Visualization</h2>
  <p>Now, itâ€™s time to start building the D3 visualization itself. If you are an expert in building the D3 custom visualization, this article will be super easy for you! We are going to draw the Parallel Coordinates chart to compare one attribute across four different metrics. </p>

<p>If you have some Visualization prepared, you can skip this and continue with <a href="link-to-next-chapter">embedding process</a>.</p>

<div class="highlight"><pre><code class="language-js" data-lang="js">var m = [30, 10, 10, 10],
	w = 960 - m[1] - m[3],
    h = 500 - m[0] - m[2];

var x = d3.scale.ordinal().rangePoints([0, w], 1),
    	y = {},
    	dragging = {};

var line = d3.svg.line(),
    	axis = d3.svg.axis().orient(&quot;left&quot;),
    	background,
    	foreground;

var svg = d3.select(&quot;body&quot;).append(&quot;svg:svg&quot;)
    	.attr(&quot;width&quot;, w + m[1] + m[3])
    	.attr(&quot;height&quot;, h + m[0] + m[2])
    	.append(&quot;svg:g&quot;)
    	.attr(&quot;transform&quot;, &quot;translate(&quot; + m[3] + &quot;,&quot; + m[0] + &quot;)&quot;);</code></pre></div>

<p>The main method that draw the visualization.</p>

<div class="highlight"><pre><code class="language-js" data-lang="js">// the main method that extract data and draw the visualization
var parallel = function(dataResult) {

		// extract header titles for axis description    
        var headers = dataResult.headers.map(function(h) {
                return h.title;
            });
    		    
    		    // delete the attribute (first in returned array) description from header array - you need just metrics description
                headers.splice(0,1);
        
    	// Extract the list of dimensions and create a scale for each.  
    	x.domain(dimensions = d3.keys(dataResult.rawData[0]).filter(function(d) {
    	 	return d != &quot;0&quot; &amp;&amp; (y[d] = d3.scale.linear()
    	 .domain(d3.extent(dataResult.rawData, function(p) { return +p[d]; }))
    	 .range([h, 0]));
    	 }));

    	  // Add grey background lines for context.
    	  background = svg.append(&quot;svg:g&quot;)
    	      .attr(&quot;class&quot;, &quot;background&quot;)
    	    .selectAll(&quot;path&quot;)
    	      .data(dataResult.rawData)
    	    .enter().append(&quot;svg:path&quot;)
    	      .attr(&quot;d&quot;, path);
    	 
    	  // Add blue foreground lines for focus.
    	  foreground = svg.append(&quot;svg:g&quot;)
    	      .attr(&quot;class&quot;, &quot;foreground&quot;)
    	    .selectAll(&quot;path&quot;)
    	      .data(dataResult.rawData)
    	    .enter().append(&quot;svg:path&quot;)
    	      .attr(&quot;d&quot;, path);
    	 
    	  // Add a group element for each dimension.
    	  var g = svg.selectAll(&quot;.dimension&quot;)
    	      .data(dimensions)
    	    .enter().append(&quot;svg:g&quot;)
    	      .attr(&quot;class&quot;, &quot;dimension&quot;)
    	      .attr(&quot;transform&quot;, function(d) { return &quot;translate(&quot; + x(d) + &quot;)&quot;; })
    	      .call(d3.behavior.drag()
    	        .on(&quot;dragstart&quot;, function(d) {
    	          dragging[d] = this.__origin__ = x(d);
    	          background.attr(&quot;visibility&quot;, &quot;hidden&quot;);
    	        })
    	        .on(&quot;drag&quot;, function(d) {
    	          dragging[d] = Math.min(w, Math.max(0, this.__origin__ += d3.event.dx));
    	          foreground.attr(&quot;d&quot;, path);
    	          dimensions.sort(function(a, b) { return position(a) - position(b); });
    	          x.domain(dimensions);
    	          g.attr(&quot;transform&quot;, function(d) { return &quot;translate(&quot; + position(d) + &quot;)&quot;; })
    	        })
    	        .on(&quot;dragend&quot;, function(d) {
    	          delete this.__origin__;
    	          delete dragging[d];
    	          transition(d3.select(this)).attr(&quot;transform&quot;, &quot;translate(&quot; + x(d) + &quot;)&quot;);
    	          transition(foreground)
    	              .attr(&quot;d&quot;, path);
    	          background
    	              .attr(&quot;d&quot;, path)
    	              .transition()
    	              .delay(500)
    	              .duration(0)
    	              .attr(&quot;visibility&quot;, null);
    	        }));
    	 
    	  // Add an axis and title.
    	  g.append(&quot;svg:g&quot;)
    	      .attr(&quot;class&quot;, &quot;axis&quot;)
    	      .each(function(d) { d3.select(this).call(axis.scale(y[d])); })
    	    .append(&quot;svg:text&quot;)
    	      .data(headers)
    	      .attr(&quot;text-anchor&quot;, &quot;middle&quot;)
    	      .attr(&quot;y&quot;, -9)
    	      .text(String);
    	 
    	  // Add and store a brush for each axis.
    	  g.append(&quot;svg:g&quot;)
    	      .attr(&quot;class&quot;, &quot;brush&quot;)
    	      .each(function(d) { d3.select(this).call(y[d].brush = d3.svg.brush().y(y[d]).on(&quot;brush&quot;, brush)); })
    	    .selectAll(&quot;rect&quot;)
    	      .attr(&quot;x&quot;, -8)
    	      .attr(&quot;width&quot;, 16);
    };</code></pre></div>

<p>Call the main method that draw the visualization.</p>

<div class="highlight"><pre><code class="language-js" data-lang="js">// calling the main method
		parallel(dataResult);</code></pre></div>

<p>Finalize the dragging and transition effects. </p>

<div class="highlight"><pre><code class="language-js" data-lang="js">function position(d) {
			var v = dragging[d];
			return v == null ? x(d) : v;
			}
 
			function transition(g) {
				return g.transition().duration(500);
			}
 
			// Returns the path for a given data point.
			function path(d) {
			  return line(dimensions.map(function(p) { return [position(p), y[p](d[p])]; }));
			}
			
			// Handles a brush event, toggling the display of foreground lines.
			function brush() {
			  var actives = dimensions.filter(function(p) { return !y[p].brush.empty(); }),
			      extents = actives.map(function(p) { return y[p].brush.extent(); });
			  foreground.style(&quot;display&quot;, function(d) {
			    return actives.every(function(p, i) {
			      return extents[i][0] &lt;= d[p] &amp;&amp; d[p] &lt;= extents[i][1];
			    }) ? null : &quot;none&quot;;
			  });
			}

		});
});</code></pre></div>

<p>Thatâ€™s all. <a href="link-to-the-example">Download the full example</a> to try it out easily.</p>

  
  <div class="section-nav">
  <div class="left align-right">
    
      <a href="http://sdk.gooddata.com/gooddata-js/tutorials//" class="prev">
        Back
      </a>
    
  </div>
  <div class="right align-left">
    
      <a href="http://sdk.gooddata.com/gooddata-js/tutorials/#embed-to-dashboard/" class="next">
        Next
      </a>
    
  </div>
  <div class="clear"></div>
</div>

</div>

      <hr>

<div class="footer" style="text-align: center; font-size: 80%;">
<p>&copy; GoodData 2014</p>
<p>Pictograms used on this page are from <a href="http://www.defaulticon.com/">http://www.defaulticon.com/</a> created by <a href="http://www.interactivemania.com/">http://www.interactivemania.com/</a></p>
      </div>

    </div> <!-- /container -->

    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
     <script src="https://developer.gooddata.com/themes/site_themes/developer2012/js/jquery.js?v=1"></script>
    <script src="http://sdk.gooddata.com/gooddata-js/js/bootstrap.min.js"></script>
    <script type="text/javascript">

                     var _gaq = _gaq || [];
                     _gaq.push(['_setAccount', 'UA-3766725-7']);
                     _gaq.push(['_trackPageview']);

                    (function() {
                      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
                      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
                      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
                       })();

    </script>
  </body>
</html>
